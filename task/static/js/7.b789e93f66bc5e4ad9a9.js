webpackJsonp([7],{"1v3s":function(t,e){},e5Wc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("g7Rx"),i=s("Au9i"),o=(s("NYxO"),{data:function(){return{id:0,taskDetail:{},taskParms:{remark:""},token:"",fileList2:[]}},created:function(){this.token=localStorage.token,this.id=this.$route.params.id,this.getInfo()},methods:{getInfo:function(){var t=this,e={taskId:parseInt(t.id)};a.a.taskDesc(e).then(function(e){1==e.msgCode&&(t.taskDetail=e.task)})},toSubmit:function(){var t=this,e=this;e.taskParms.id=e.id,console.log("vm.fileList2",e.fileList2);for(var s=0;s<e.fileList2.length;s++){var o="picture"+(s+1);e.taskParms[o]=e.fileList2[s].url}a.a.submitDistributeTask(e.taskParms).then(function(e){1==e.msgCode&&(Object(i.Toast)({message:"提交成功",iconClass:"icon icon-success"}),t.$router.push({path:"/task/dist_detail/"}))})},handlePostSuccess:function(t,e){console.log("文件上传成功钩子",t);1==t.msgCode&&this.fileList2.push({name:t.filePath,url:t.filePath})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("mt-header",{attrs:{title:"提交任务"}},[s("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)],1),t._v(" "),s("div",{staticClass:"layout"},[s("mt-field",{attrs:{label:"备注",placeholder:"请输入备注",type:"textarea",maxlength:"100"},model:{value:t.taskParms.remark,callback:function(e){t.$set(t.taskParms,"remark",e)},expression:"taskParms.remark"}})],1),t._v(" "),s("div",{staticClass:"layout"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://120.78.203.150:8080/RddTaskService/api/common/uploadimg",headers:{token:t.token},"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handlePostSuccess,limit:5,"file-list":t.fileList2,"list-type":"picture"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),s("div",{staticClass:"detail-btn"},[s("div",{staticClass:"bootom",on:{click:function(e){t.toSubmit()}}},[t._m(0)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-btn"},[e("label",[this._v("提交任务")])])}]};var n=s("VU/8")(o,l,!1,function(t){s("1v3s")},"data-v-820f3006",null);e.default=n.exports}});