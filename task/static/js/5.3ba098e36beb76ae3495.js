webpackJsonp([5],{"0AP6":function(e,t){},CmGh:function(e,t){},LoR6:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("MS2J"),a=s("ahCv"),o=s("NC6I"),i=s.n(o),n=s("5reh"),l=s("Au9i"),d={data:function(){return{validCount:0,oldPassword:"",newPassword:"",confirmPassword:"",rules:{oldPassword:{itRequried:{reg:!0,msg:""},itType:{reg:"",msg:""},itLen:{reg:8,msg:""},itState:"",itMsg:""},newPassword:{itRequried:{reg:!0,msg:""},itType:{reg:"",msg:""},itLen:{reg:8,msg:""},itState:"",itMsg:""},confirmPassword:{itRequried:{reg:!0,msg:""},itType:{reg:"",msg:""},itLen:{reg:8,msg:""},itState:"",itMsg:""}}}},mounted:function(){},methods:{updateUserInfo:function(){var e=this;for(var t in this.validCount=0,this.rules)this.validCount+=r.a.byOneValid(this[t],this.rules[t]);if(this.validCount>0);else{var s=this;if(s.newPassword!==s.confirmPassword)Object(l.Toast)({message:"两次密码输入不一致，请重新输入",position:"middle",duration:2e3});else{var o={userName:localStorage.userName,oldPassword:i()(s.oldPassword),newPassword:i()(s.newPassword)};console.log("登录查看vm1",s),a.a.updateUserInfo(o).then(function(t){if(1==t.msgCode){s.$store.commit(n.a,t.token);var r={userId:t.userId};a.a.queryUserInfo(r).then(function(t){1==t.msgCode&&(s.$store.commit("setUserInfo",t.user),e.$router.replace({path:"/"}))})}})}}}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("mt-header",{attrs:{title:"修改密码"}},[s("router-link",{attrs:{slot:"left",to:"/user"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)],1),e._v(" "),s("div",{staticClass:"page-part"},[s("mt-field",{attrs:{label:"原密码",placeholder:"请输入原密码",type:"password",attr:{maxlength:20},state:e.rules.oldPassword.itState},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),e._v(" "),s("mt-field",{attrs:{label:"新密码",placeholder:"请输入密码",type:"password",attr:{maxlength:20},state:e.rules.newPassword.itState},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),e._v(" "),s("mt-field",{attrs:{label:"确认密码",placeholder:"请确认密码",type:"password",attr:{maxlength:20},state:e.rules.confirmPassword.itState},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),e._v(" "),s("div",{staticClass:"login-bottom"},[s("mt-button",{staticClass:"login-btn-login",attrs:{size:"large",type:"primary"},on:{click:e.updateUserInfo}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]};var c=s("VU/8")(d,u,!1,function(e){s("CmGh"),s("0AP6")},null,null);t.default=c.exports}});